<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center p-3">
    <h2 class="m-0">All Customers</h2>
    <a routerLink="/add-customer" class="btn btn-success">Create</a>
  </div>

  @if (errorMessage) {
  <div class="alert alert-warning">{{ errorMessage }}</div>
  }

  <div class="row text-primary text-center">
    <table class="table table-hover table-striped-columns table-bordered">
      <thead>
        <tr>
          <th>Id</th>
          <th>Name</th>
          <th>Username</th>
          <th>Role</th>
          <th>Active</th>
          <th>Manage</th>
        </tr>
      </thead>
      <tbody>
        @if (customers$ | async; as customers) { @if (customers.length === 0) {
        <tr>
          <td colspan="5" class="text-center">No customers found</td>
        </tr>
        } @else { @for (c of customers; track c) {
        <tr>
          <td>{{ c.id }}</td>
          <td>{{ c.name }}</td>
          <td>{{ c.username }}</td>
          <td>{{ c.role }}</td>
          <td>{{ c.isActive }}</td>
          <td class="col">
            <a
              [routerLink]="['/customer-detail', c.id]"
              class="me-2 text-decoration-none btn btn-info"
              >View Details</a
            >
            <a
              [routerLink]="['/edit-customer', c.id]"
              class="me-2 text-decoration-none btn btn-primary"
              >Edit</a
            >
            <button class="text-decoration-none btn btn-danger" (click)="onDelete(c.id)">
              Delete
            </button>
          </td>
        </tr>
        } } } @else {
        <tr>
          <td colspan="5" class="text-center">Loading...</td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>
